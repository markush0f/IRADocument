{
  "id": "project-overview",
  "title": "Project Overview",
  "description": "An exhaustive overview of the project architecture, focusing on important components and services.",
  "content_markdown": "# Project Overview\n\n## Introduction\nThe IRA subsystem plays a critical role in the overall architecture by managing system resources, applications, and metrics. It provides essential services for monitoring and controlling application lifecycles, ensuring optimal performance and responsiveness in a scalable manner.\n\n## Architecture & Patterns\nThe subsystem utilizes several architectural patterns:\n\n### 1. **Service Layer Pattern**  \nThe usage of service classes like `ApplicationsService`, `ProcessesService`, `SystemAlertsService`, and more abstracts business logic from the API layer. This allows for cleaner, more modular code that is easier to test and maintain.\n\n#### Implementation Example:\n- **`ApplicationsService`** integrates the `ApplicationRepository` for CRUD operations on application entities, using dependency injection to ensure cohesive data management.\n\n### 2. **Dependency Injection**  \nLeveraging FastAPI's built-in dependency management simplifies the injection of resources like `AsyncSession`, promoting separation of concerns across the system.\n\n#### Implementation Example:\n- **Database Sessions** are injected in API routes and service classes ensuring that each request has access to a fresh database session without manual management.\n\n### 3. **Asynchronous Programming**  \nAdoption of `async` and `await` keywords enhances application responsiveness, allowing for non-blocking operations, which make the system capable of handling multiple requests simultaneously.\n\n#### Implementation Example:\n- Endpoints in `applications.py` and `metrics.py` use async functions to perform database interactions and metric collection, reducing latency and improving user experience.\n\n## Component Breakdown\n### 1. **Process Management**  \n- **File:** `ira/proccess.py`  \n  - Implements process scanning via `scan_processes`, focusing on processes with long execution times.\n  - Handles output by printing relevant details like `pid`, `comm`, and `cmdline`, essential for diagnostics and monitoring.\n\n### 2. **Application Handling**  \n- **File:** `ira/app/services/applications/applications.py`  \n  - Manages application creation, retrieval, updates, and deletions through the `ApplicationRepository` with SQLAlchemy's AsyncSession for non-blocking database interaction.\n\n### 3. **Logging and Alerts**  \n- **Files:**  \n  - **`ira/app/services/system/system_alerts_service.py`** manages CPU, memory, and load alerts, implementing a cooldown mechanism to prevent duplicate alerts.\n  - **`ira/app/services/collector/collect_process_metrics.py`** collects and returns metrics for each active process, standardizing through `ApplicationCollectedMetricsDTO`.\n\n### 4. **User Management**  \n- **File:** `ira/app/services/user_system_service.py` categorizes users and provides functionalities like fetching currently active users and filtering by shell type.\n\n## Data Flow\nData flows through the IRA subsystem in a structured way, using FastAPI as the web framework to handle incoming requests:\n1. **Requests** enter through defined API endpoints in `ira/app/api/*.py`.\n2. **Dependency Injection** provides necessary services (like session access) and business logic (via services and repositories).\n3. **Service Classes** execute business logic, interact with the data model, and perform CRUD operations as needed.\n4. **Responses** are returned in structured JSON format, helping the frontend applications consume data effectively.\n\n## Diagram\n```mermaid\ngraph TD;\n    A[Client] -->|HTTP Requests| B[FastAPI API];\n    B -->|Service Call| C[Application Service];\n    B -->|Service Call| D[User Service];\n    C -->|CRUD| E[Database];\n    D -->|CRUD| E;\n```\n\n## Configuration & Dependencies\nThe following vital configuration and dependencies are used:\n- Environment variables include `IRA_DATABASE_DSN` or `DATABASE_URL` for database connectivity and port configurations specified in each module's `Dockerfile`.\n- Leveraging `pythondontwritebytecode` and `pythonunbuffered` environment variables improves Python's performance in Docker containers.\n\n## Key Technical Decisions\n- Implementation of **FastAPI** framework was chosen for its asynchronous support and automatic generation of interactive API documentation, which aids development and usability.\n- Use of **SQLAlchemy** with **AsyncSession** allows non-blocking database interactions, improving the application\u2019s efficiency and responsiveness under load.\n- Implementation of structured data models through Pydantic ensures rigorous data validation and serialization, maintaining integrity throughout the application.\n\n---",
  "diagram_mermaid": "graph TD;\n    A[Client] -->|HTTP Requests| B[FastAPI API];\n    B -->|Service Call| C[Application Service];\n    B -->|Service Call| D[User Service];\n    C -->|CRUD| E[Database];\n    D -->|CRUD| E;",
  "related_files": []
}